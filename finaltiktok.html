<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get Coins</title>

<style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
    body { background: #fafafa; }
    .container { width: 90%; max-width: 900px; margin: auto; padding: 40px 0; }
    .heading { font-size: 28px; font-weight: bold; }

    /* Username + Icon */
    .username-wrapper {
        display: flex;
        align-items: center;
        gap: 10px;
        background: white;
        padding: 10px;
        border-radius: 10px;
        border: 1px solid #ccc;
        margin-bottom: 20px;
    }
    .username-wrapper img {
        width: 48px;
        height: 48px;
        border-radius: 10px;
        object-fit: cover;
    }
    .username-input {
        border: none;
        outline: none;
        flex: 1;
        font-size: 16px;
    }

    .sub-text { font-size: 14px; margin-bottom: 6px; }
    .highlight { color: #ff2d55; font-weight: bold; }

    .coin-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 18px; margin-top: 20px; }
    .coin-box {
        background: #ffffff;
        padding: 22px;
        text-align: center;
        border-radius: 12px;
        border: 2px solid transparent;
        transition: 0.2s;
        cursor: pointer;
    }
    .coin-box:hover, .coin-box.selected { border-color: #ff2d55; }

    .coin-icon-img { width: 40px; height: 40px; margin-bottom: 8px; }

    .custom-input-field {
        width: 100%;
        margin-top: 10px;
        padding: 8px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 15px;
    }
    .hidden { display: none; }

    /* Payment section */
    .payment-section { margin-top: 32px; text-align: left; }
    .payment-option { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; cursor: pointer; }
    .payment-box { background: #fff; padding: 15px; border-radius: 12px; border: 2px solid transparent; flex: 1; }
    input[type="radio"] { width: 20px; height: 20px; accent-color: #ff2d55; cursor: pointer; }

    .total { display: flex; justify-content: space-between; font-size: 20px; margin: 30px 0; }

    .recharge-btn { padding: 14px 22px; font-size: 17px; color: white; background: #d32a49; border-radius: 10px; border: none; cursor: pointer; opacity: .4; width: 200px; }
    .recharge-btn.enabled { opacity: 1; }

    /* Popup */
    .popup-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.55);
        display: none;
        justify-content: center;
        align-items: center;
    }
    .popup { background: white; width: 320px; padding: 30px; border-radius: 16px; text-align: center; }

    .loader {
        border: 6px solid #ddd;
        border-top: 6px solid #ff2d55;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        margin: auto;
        animation: spin 1s linear infinite;
    }
    @keyframes spin { 100% { transform: rotate(360deg); } }

    .success-icon-img {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        margin-bottom: 18px;
        animation: bounceFade 0.9s ease-out;
    }
    @keyframes bounceFade {
        0% { transform: scale(0.5); opacity: 0; }
        60% { transform: scale(1.15); opacity: 1; }
        100% { transform: scale(1); }
    }
</style>
</head>

<body>
<div class="container">
    <h2 class="heading">Get Coins</h2>

    <!-- Username -->
    <div class="username-wrapper">
        <img src="mainicon.png">
        <input type="text" id="username" class="username-input" placeholder="Username">
    </div>

    <p class="sub-text">Recharge: <span class="highlight">Save around 25% with a lower third-party fee.</span></p>

    <div class="coin-grid" id="coinGrid"></div>

    <div class="payment-section">
        <label class="payment-option">
            <input type="radio" name="payment" value="card"> <div class="payment-box">ðŸ’³ Debit / Credit Card (â€¢â€¢â€¢â€¢ 8273)</div>
        </label>

        <label class="payment-option">
            <input type="radio" name="payment" value="apple"> <div class="payment-box">ï£¿ Apple Pay</div>
        </label>
    </div>

    <div class="total">
        <span>Total</span>
        <span id="totalValue">$0</span>
    </div>

    <button id="rechargeBtn" class="recharge-btn">Recharge</button>
</div>

<!-- Popup overlay -->
<div class="popup-overlay" id="popupOverlay">
    <div class="popup" id="popupContent"></div>
</div>


<script>
const coinGrid = document.getElementById("coinGrid");
const coins = [
  { amount: 30, price: 0.29 }, { amount: 350, price: 3.35 },
  { amount: 700, price: 6.70 }, { amount: 1400, price: 13.39 },
  { amount: 3500, price: 33.49 }, { amount: 7000, price: 66.95 },
  { amount: 17500, price: 167.29 },
  { custom: true }
];

coins.forEach(c => {
  let div = document.createElement("div");
  div.className = "coin-box";
  div.innerHTML = c.custom ?
    `<img src="coinicon.png" class="coin-icon-img"><h3>Custom</h3><input type="number" class="custom-input-field hidden" placeholder="Enter coins">`
    :
    `<img src="coinicon.png" class="coin-icon-img"><h3>${c.amount}</h3><p>$${c.price}</p>`;
  coinGrid.appendChild(div);
});

let selectedCoins = 0, selectedPrice = 0, selectedPayment = null;
const totalValue = document.getElementById("totalValue");

function updateButton() {
  const btn = document.getElementById("rechargeBtn");
  const user = document.getElementById("username").value.trim();

  btn.classList.toggle("enabled", user !== "" && selectedCoins > 0 && selectedPayment);
}

document.querySelectorAll(".coin-box").forEach(box => {
  box.addEventListener("click", () => {
    document.querySelectorAll(".coin-box").forEach(b => b.classList.remove("selected"));
    box.classList.add("selected");

    const input = box.querySelector("input");

    if (input) {
      input.classList.remove("hidden");
      input.addEventListener("input", () => {
        selectedCoins = parseInt(input.value || 0);
        selectedPrice = (selectedCoins * 0.009).toFixed(2);
        totalValue.innerText = `$${selectedPrice}`;
        updateButton();
      });
    } else {
      document.querySelectorAll(".custom-input-field").forEach(el => el.classList.add("hidden"));
      selectedCoins = parseInt(box.querySelector("h3").innerText);
      selectedPrice = parseFloat(box.querySelector("p").innerText.replace("$", ""));
      totalValue.innerText = `$${selectedPrice}`;
      updateButton();
    }
  });
});

// Payment selection
document.querySelectorAll("input[name='payment']").forEach(radio => {
  radio.addEventListener("change", () => {
    selectedPayment = radio.value;
    updateButton();
  });
});

// Recharge popup logic
document.getElementById("rechargeBtn").addEventListener("click", () => {
  if (!rechargeBtn.classList.contains("enabled")) return;

  const overlay = document.getElementById("popupOverlay");
  const popup = document.getElementById("popupContent");
  const username = document.getElementById("username").value;
  const transactionID = Math.random().toString(36).toUpperCase().slice(2, 10);

  overlay.style.display = "flex";
  popup.innerHTML = `<div class="loader"></div><p style="margin-top: 12px;">Processing Payment...</p>`;

  // Hold 10 seconds
  setTimeout(() => {
    popup.innerHTML = `
      <img src="green-good.png" class="success-icon-img">
      <h3>Payment Successful</h3>
      <p>${selectedCoins} Coins sent to ${username}</p>
      <p>$${selectedPrice} â€” Transaction ID: ${transactionID}</p>
      <p style="font-size:14px; color:gray;">It will show up in the account within 24h.</p>
      <button onclick="location.reload()" style="margin-top: 15px; background:#d32a49; color:white; padding:10px 20px; border-radius:8px; border:none;">Close</button>
    `;
  }, 10000);
});
</script>
</body>
</html>
